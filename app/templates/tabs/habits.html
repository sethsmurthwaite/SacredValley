<!-- app/templates/tabs/habits.html -->
<div class="user-card">
    <h2><span id="username"></span></h2>
    <p>Realm: <strong id="realm"></strong> • Progress: <span id="progress"></span> / <span id="required_progress"></span></p>
    <div class="progress-bar"><div id="progress-fill" style="width: 0%"></div></div>
</div>

<div class="habits-header">
    <h2>Your Habits</h2>
    <button id="add-habit-btn" class="add-btn">＋</button>
</div>

<div id="habit-list-container">
    <p class="empty-state">Loading habits...</p>
</div>

<!-- Add Habit Modal -->
<div id="habit-modal" class="modal">
    <div class="modal-content">
        <h2>Add New Habit</h2>
        <br><br>
        <form id="habit-form">
            <input type="hidden" name="repeat_days" value="127">

            <div class="form-group">
                <label for="name">Habit Name</label>
                <input type="text" name="name" id="name" required placeholder="e.g., Morning Meditation">
            </div>

            <div class="form-group">
                <label for="progress_value">Progress per Completion</label>
                <input type="number" name="progress_value" id="progress_value" min="1" max="10000" value="10">
            </div>

            <div class="form-group">
                <label for="description">Description (optional)</label>
                <textarea name="description" id="description" rows="3" placeholder="Why this habit matters..."></textarea>
            </div>

            <div class="form-group">
                <label for="frequency">Frequency</label>
                <select name="frequency" id="frequency">
                    <option value="daily">Daily</option>
                    <option value="weekly">Weekly</option>
                </select>
            </div>

            <div id="repeat-days" class="form-group" style="display:none;">
                <label>Repeat on these days:</label>
                <div class="day-grid">
                    <label class="day-label"><input type="checkbox" name="days" value="1" checked><span>Sun</span></label>
                    <label class="day-label"><input type="checkbox" name="days" value="2" checked><span>Mon</span></label>
                    <label class="day-label"><input type="checkbox" name="days" value="4" checked><span>Tue</span></label>
                    <label class="day-label"><input type="checkbox" name="days" value="8" checked><span>Wed</span></label>
                    <label class="day-label"><input type="checkbox" name="days" value="16" checked><span>Thu</span></label>
                    <label class="day-label"><input type="checkbox" name="days" value="32" checked><span>Fri</span></label>
                    <label class="day-label"><input type="checkbox" name="days" value="64" checked><span>Sat</span></label>
                </div>
            </div>

            <div class="modal-actions">
                <button type="submit" class="btn-primary">Create Habit</button>
                <button type="button" id="cancel-modal" class="btn-secondary">Cancel</button>
            </div>
        </form>
    </div>
</div>

<!-- Load habits.js only when this tab is active -->
<script src="/static/app_js/habits.js"></script>